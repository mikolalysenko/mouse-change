<!DOCTYPE html>
<html>
<body></body>
<script language=javascript>
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
require('../mouse-listen')(function(buttons, x, y) {
  document.body.innerHTML = 
    '<p>Buttons: 0b' + buttons.toString(2) + 
    ', x:' + x + 
    ', y:' + y + '</p>'
})
},{"../mouse-listen":2}],2:[function(require,module,exports){
'use strict'

module.exports = mouseListen

var mouse = require('mouse-event')

function mouseListen(element, callback) {
  
  if(!callback) {
    callback = element
    element = window
  }

  var buttonState = 0, x = 0, y = 0

  function handleEvent(nextButtons, ev) {
    var nextX = mouse.x(ev)
    var nextY = mouse.y(ev)
    if('buttons' in ev) {
      nextButtons = ev.buttons|0
    }
    if(nextButtons !== buttonState ||
       nextX !== x ||
       nextY !== y) {
      buttonState = nextButtons|0
      x = nextX||0
      y = nextY||0
      callback(buttonState, x, y)
    }
  }

  function clearState(ev) {
    handleEvent(0, ev)
  }

  function handleBlur() {
    if(buttonState || x || y) {
      x = y = 0
      buttonState = 0
      callback(0, 0, 0)
    }
  }

  element.addEventListener('mousemove', function(ev) {
    if(mouse.buttons(ev) === 0) {
      handleEvent(0, ev)
    } else {
      handleEvent(buttonState, ev)
    }
  })
  element.addEventListener('mousedown', function(ev) {
    handleEvent(buttonState | mouse.buttons(ev), ev)
  })
  element.addEventListener('mouseup', function(ev) {
    handleEvent(buttonState & ~mouse.buttons(ev), ev)
  })

  element.addEventListener('mouseleave', clearState)
  element.addEventListener('mouseenter', clearState)
  element.addEventListener('mouseout', clearState)
  element.addEventListener('mouseover', clearState)
  element.addEventListener('blur', handleBlur)

  if(element !== window) {
    window.addEventListener('blur', handleBlur)
  }
}
},{"mouse-event":3}],3:[function(require,module,exports){
'use strict'

function mouseButtons(ev) {
  if(typeof ev === 'object') {
    if('buttons' in ev) {
      return ev.buttons
    } else if('which' in ev) {
      var b = ev.which
      if(b === 2) {
        return 4
      } else if(b === 3) {
        return 2
      } else if(b > 0) {
        return 1<<(b-1)
      }
    } else if('button' in ev) {
      var b = ev.button
      console.log(b)
      if(b === 1) {
        return 4
      } else if(b === 2) {
        return 2
      } else if(b >= 0) {
        return 1<<b
      }
    }
  }
  return 0
}
exports.buttons = mouseButtons

function mouseElement(ev) {
  return ev.target || ev.srcElement || window
}
exports.element = mouseElement

function mouseRelativeX(ev) {
  if(typeof ev === 'object') {
    if('offsetX' in ev) {
      return ev.offsetX
    }
    var target = ev.target || ev.srcElement
    if('clientX' in ev) {
      return ev.clientX - target.clientLeft
    }
    if('pageX' in ev) {
      return ev.pageX - target.offsetLeft
    }
  }
  return 0
}
exports.x = mouseRelativeX

function mouseRelativeY(ev) {
  if(typeof ev === 'object') {
    if('offsetY' in ev) {
      return ev.offsetY
    }
    var target = ev.target || ev.srcElement
    if('clientY' in ev) {
      return ev.clientY - target.clientTop
    }
    if('pageX' in ev) {
      return ev.pageY - target.offsetTop
    }
  }
  return 0
}
exports.y = mouseRelativeY
},{}]},{},[1]);
</script>
</html>
